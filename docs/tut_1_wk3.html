<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Prescriptive Analytics with Mathematical Programming</title>
    <meta charset="utf-8" />
    <meta name="author" content="Victor Medina-Olivares" />
    <meta name="author" content="victor.medina@ed.ac.uk" />
    <meta name="date" content="2019-10-02" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Prescriptive Analytics with Mathematical Programming
## Tutorial 1, week 3
### Victor Medina-Olivares
### <a href="mailto:victor.medina@ed.ac.uk" class="email">victor.medina@ed.ac.uk</a>
### 02 Oct 2019

---


# GAMS

The General Algebraic Modeling System (GAMS) is a high-level modeling system for mathematical programming and optimization.

--

- Specifically designed for modeling linear, nonlinear and mixed integer optimization problems.

--

## Installation

1. Go to [https://www.gams.com](https://www.gams.com)
2. Go to `Resources` and `Download`
3. Download the GAMS version for your OS
4. Save the license `gamslice.txt` in gamsdir
5. Choose solver if needed (`File -&gt; Options -&gt; Solver` find `CPLEX`)

---

# Transportation problem

- A soft drink is manufactured at two plants in the UK; Manchester and Glasgow
- There are three distribution centres located in different areas; Edinburgh, Aberdeen  and Newcastle
- The amount required for each centre and the shipping cost by unit from each plant is

|    | Required (L)        | Cost Manchester (£ p/L) | Cost Glasgow (£ p/L) |
|----|:----------------:|:----------------:|:----------------:|
| Edinburgh |      10,000      |         2        |         3        |
| Aberdeen |      80,000      |         3        |         1        |
| Newcastle |      15,000      |         5        |         4        |

- Plant in Manchester can produce 20,000 L and in Glasgow can produce 15,000 L

How should be the transportation plan to minimise monthly
transportation costs?

---
# Formulation


.pull-left[

#### Indices:

`\(i =\)` plants

`\(j =\)` distribution centres

#### Given Data:

`\(a_i =\)` capacity of plant `\(i\)`

`\(b_j =\)` demand for drink at centre `\(j\)`

`\(c_{ij} =\)` cost per litre shipment between plant `\(i\)` and centre `\(j\)`
 
 ]
 
.pull-right[

#### Decision Variables:

`\(x_{ij} =\)` litres to ship from plant `\(i\)` to centre `\(j\)`
where `\(x_{ij} \ge 0\)`, for all `\(i,j\)`

#### Constraints:

Cap limit at plant `\(i\)`: `\(\sum_j x_{ij} \le a_i\)`

Demand at centre `\(j\)`: `\(\sum_i x_{ij} = b_i\)`

Total cost: `\(\sum_{ij} c_{ij}*x_{ij}\)`

]

--

`\(\quad\quad\)` **The objective is to find `\(x_{ij}\)` which minimizes the total cost**

---
# In GAMS

- `Indices` are called **`sets`**
- `Given Data` are called **`parameters`**, **`scalars`** or **`tables`** (depending on type)
- `Decision variables` are called **`variables`**
- `Constraints` and the `Objective Function` are called **`equations`**


**Let's code it!**

---
# Following with the Transportation problem

What would happen with the total cost if:

--
- Plant in Glasgow increases its capacity from 15,000 to 15,001; 

--

*If we increase the capacity of plant Glasgow in one unit, then the resulting objective value will decrease in one unit accordingly. Therefore, without solving the problem, we know that the resulting objective function will be then (96,000 – 1) = 95,999 (£)*

--
- Distribution centre Newcastle increases its demand in one unit; 

--

*Analysing the marginal cost associated with the demand constraint in Newcastle, which is +5. Thus, the resulting objective value will be increased to 96,005 (£)*

--
- 1,000 products **must** be shipped from plant Manchester to centre Aberdeen

--

*The marginal cost associated with the variable x_(Manchester,Aberdeen) = 1, then shipping 1,000 units of products will increase the objective value to 96,000 + 1,000 = 97,000 (£)*

---
# Transportation problem v2

--
.pull-left[

- The Northside and Southside facilities of Zeron Industries supply three firms (Zrox, Hewes, Rockrite) with customized shelving for its offices. 
- Northside and Southside order shelving from the same two manufacturers, Arnold and Supershelf. 
- Demands are 50 for Zrox, 60 for Hewes, and 40 for Rockrite. 
- Arnold and Supershelf can supply at most 75 units. 
]

--
.pull-right[
- Unit costs from the manufacturers to the suppliers are

|            | Zeron N | Zeron S |
|------------|:-------:|:-------:|
| Arnold     |    5    |    8    |
| Supershelf |    7    |    4    |

- The costs to install the shelving at the various locations are

|         | Zrox | Hewes | Rockrite |
|---------|:----:|:-----:|:--------:|
| Zeron N |   1  |   5   |     8    |
| Zeron S |   3  |   4   |     4    |

]

--

`\(\quad\quad\)` **Find the transportation plan that minimises the overall costs**
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"self_contained": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
